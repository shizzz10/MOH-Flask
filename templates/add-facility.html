{% extends "base.html" %} {% block title %} Add Facility {% endblock %} {% block
content %}

<main
dir="ltr"
  class="px-2 lg:px-0 lg:pr-3 flex flex-col gap-8 items-center xl:max-w-[1200px] w-full"
>
  <!-- Facility Registration Form -->
  <form
    class="flex flex-col gap-6 mt-6 mb-6 sm:mb-2 overflow-hidden border border-light p-5 sm:p-6 lg:p-8 w-[94%] sm:w-[90%] lg:w-[80%] rounded-2xl bg-white shadow-md shadow-black/40 transition-all duration-200 ease-in-out hover:shadow-black/20"
  >
    <!-- Heading -->
    <div class="flex items-start">
      <h2 class="text-2xl sm:text-3xl lg:text-3xl text-darkmain font-bold">
        Register New Facility/تسجيل منشأة جديدة<br />
      </h2>
    </div>

    <!-- Form Fields -->
    <div class="flex flex-col gap-4">
      <!-- Facility Image Upload -->
      <div class="flex flex-col gap-1">
        <label for="facility_image" class="text-gray-700 font-medium lg:text-lg"
          >Facility Image/صورة المنشأة</label
        >
        <input
          id="facility_image"
          type="file"
          accept="image/*"
          class="border border-gray-300 rounded-lg p-2 text-base focus-visible:outline-1 focus-visible:outline-darkmain"
        />
        <span class="text-xs lg:text-sm text-red-500 hidden">Error Here</span>
      </div>

      <!-- Map Location -->
      <div class="flex flex-col gap-1">
        <label class="form-label text-gray-700 font-medium lg:text-lg">Hospital Location/موقع المستشفى</label>
        <div id="hospitalMap"  class="w-[100%] lg:w-[100%] aspect-[5/3] lg:aspect-[6/2] object-cover rounded-xl shadow-sm shadow-black/20"></div>
        <small class="text-muted text-red-300 leading-4 text-sm lg:text-base">Click on the map to set the hospital location or enter coordinates manually</small>
        <div class="flex flex-col sm:flex-row sm:justify-between gap-2">
            <div class="col-md-6">
                <label class="form-label text-gray-700 font-medium lg:text-lg" for="latitude">Latitude</label>
                <input class="form-control border border-gray-300 rounded-lg p-2 text-base focus-visible:outline-1 focus-visible:outline-darkmain" id="latitude" name="latitude" required type="text" value="37.7749">
            </div>
            <div class="col-md-6">
                <label class="form-label text-gray-700 font-medium lg:text-lg" for="longitude">Longitude</label>
                <input class="form-control border border-gray-300 rounded-lg p-2 text-base focus-visible:outline-1 focus-visible:outline-darkmain" id="longitude" name="longitude" required type="text" value="-122.4194">
            </div>
        </div>
    </div>

      <!-- Facility Name -->
      <div class="flex flex-col gap-1">
        <label for="facility_name" class="text-gray-700 font-medium lg:text-lg"
          >Facility Name/اسم المنشأة</label
        >
        <input
          id="facility_name"
          type="text"
          class="border border-gray-300 rounded-lg p-2 text-base focus-visible:outline-1 focus-visible:outline-darkmain"
          placeholder="Enter facility name"
        />
        <span class="text-xs lg:text-sm text-red-500 hidden">Error Here</span>
      </div>

      <!-- Facility Type -->
      <div class="flex flex-col gap-1">
        <label for="facility_type" class="text-gray-700 font-medium lg:text-lg"
          >Facility Type/نوع المنشأة</label
        >
        <select
          id="facility_type"
          class="border border-gray-300 rounded-lg p-2 text-base focus-visible:outline-1 focus-visible:outline-darkmain bg-white"
        >
          <option value="" selected disabled>Select Facility Type</option>
          <option value="hospitals">Hospitals</option>
          <option value="pharmacies">Pharmacies</option>
          <option value="support_services">Support Services</option>
          <option value="dental_labs">Dental Labs</option>
          <option value="laboratories">Laboratories</option>
          <option value="optics">Optics</option>
          <option value="private_complexes">Private Complexes</option>
          <option value="public_complexes">Public Complexes</option>
        </select>
        <span class="text-xs lg:text-sm text-red-500 hidden">Error Here</span>
      </div>

      <!-- License Number -->
      <div class="flex flex-col gap-1">
        <label for="license_number" class="text-gray-700 font-medium lg:text-lg"
          >License Number/رقم الترخيص</label
        >
        <input
          id="license_number"
          type="text"
          class="border border-gray-300 rounded-lg p-2 text-base focus-visible:outline-1 focus-visible:outline-darkmain"
          placeholder="Enter license number"
        />
        <span class="text-xs lg:text-sm text-red-500 hidden">Error Here</span>
      </div>

      <!-- Commercial Registration Number -->
      <div class="flex flex-col gap-1">
        <label
          for="commercial_number"
          class="text-gray-700 font-medium lg:text-lg"
          >Commercial Registration Number/رقم السجل التجاري</label
        >
        <input
          id="commercial_number"
          type="text"
          class="border border-gray-300 rounded-lg p-2 text-base focus-visible:outline-1 focus-visible:outline-darkmain"
          placeholder="Enter commercial registration number"
        />
        <span class="text-xs lg:text-sm text-red-500 hidden">Error Here</span>
      </div>

      <!-- Approval Type -->
      <div class="flex flex-col gap-1">
        <label for="approval_type" class="text-gray-700 font-medium lg:text-lg"
          >Approval Type/نوع الموافقة</label
        >
        <select
          id="approval_type"
          class="border border-gray-300 rounded-lg p-2 text-base focus-visible:outline-1 focus-visible:outline-darkmain bg-white"
        >
          <option value="" selected disabled>Select Approval Type</option>
          <option value="initial">Initial</option>
          <option value="final">Final</option>
        </select>
        <span class="text-xs lg:text-sm text-red-500 hidden">Error Here</span>
      </div>

      <!-- License Status -->
      <div class="flex flex-col gap-1">
        <label for="license_status" class="text-gray-700 font-medium lg:text-lg"
          >License Status/حالة الترخيص</label
        >
        <select
          id="license_status"
          class="border border-gray-300 rounded-lg p-2 text-base focus-visible:outline-1 focus-visible:outline-darkmain bg-white"
        >
          <option value="" selected disabled>Select License Status</option>
          <option value="active">Active</option>
          <option value="expired">Expired</option>
        </select>
        <span class="text-xs lg:text-sm text-red-500 hidden">Error Here</span>
      </div>

      <!-- Owner Name -->
      <div class="flex flex-col gap-1">
        <label for="owner_name" class="text-gray-700 font-medium lg:text-lg"
          >Owner Name/اسم المالك</label
        >
        <input
          id="owner_name"
          type="text"
          class="border border-gray-300 rounded-lg p-2 text-base focus-visible:outline-1 focus-visible:outline-darkmain"
          placeholder="Enter owner name"
        />
        <span class="text-xs lg:text-sm text-red-500 hidden">Error Here</span>
      </div>

      <!-- Owner Contact -->
      <div class="flex flex-col gap-1">
        <label for="owner_contact" class="text-gray-700 font-medium lg:text-lg"
          >Owner Contact Number/رقم الاتصال بالمالك</label
        >
        <input
          id="owner_contact"
          type="text"
          class="border border-gray-300 rounded-lg p-2 text-base focus-visible:outline-1 focus-visible:outline-darkmain"
          placeholder="Enter contact number"
        />
        <span class="text-xs lg:text-sm text-red-500 hidden">Error Here</span>
      </div>

      <!-- Owner Email -->
      <div class="flex flex-col gap-1">
        <label for="owner_email" class="text-gray-700 font-medium lg:text-lg"
          >Owner Email/البريد الإلكتروني للمالك</label
        >
        <input
          id="owner_email"
          type="email"
          class="border border-gray-300 rounded-lg p-2 text-base focus-visible:outline-1 focus-visible:outline-darkmain"
          placeholder="Enter email"
        />
        <span class="text-xs lg:text-sm text-red-500 hidden">Error Here</span>
      </div>

      <!-- Location -->
      <div class="flex flex-col gap-1">
        <label for="location" class="text-gray-700 font-medium lg:text-lg"
          >Location/موقع</label
        >
        <input
          id="location"
          type="text"
          class="border border-gray-300 rounded-lg p-2 text-base focus-visible:outline-1 focus-visible:outline-darkmain"
          placeholder="Enter facility location"
        />
        <span class="text-xs lg:text-sm text-red-500 hidden">Error Here</span>
      </div>

      <!-- Issuance Date -->
      <div class="flex flex-col gap-1">
        <label for="issuance_date" class="text-gray-700 font-medium lg:text-lg"
          >Issuance Date/تاريخ الإصدار</label
        >
        <input
          id="issuance_date"
          type="date"
          class="border border-gray-300 rounded-lg p-2 text-base focus-visible:outline-1 focus-visible:outline-darkmain"
        />
        <span class="text-xs lg:text-sm text-red-500 hidden">Error Here</span>
      </div>

      <!-- Expiry Date -->
      <div class="flex flex-col gap-1">
        <label for="expiry_date" class="text-gray-700 font-medium lg:text-lg"
          >Expiry Date/تاريخ انتهاء الصلاحية</label
        >
        <input
          id="expiry_date"
          type="date"
          class="border border-gray-300 rounded-lg p-2 text-base focus-visible:outline-1 focus-visible:outline-darkmain"
        />
        <span class="text-xs lg:text-sm text-red-500 hidden">Error Here</span>
      </div>
    </div>

    <button
      class="w-full bg-darkmain border border-darkmain hover:bg-white hover:text-darkmain font-medium lg:font-semibold text-white rounded-2xl p-1.5 lg:p-2 text-lg lg:text-xl"
    >
      Submit
    </button>
  </form>

  

</main>


<script>
  document.addEventListener('DOMContentLoaded', function() {
      const map = L.map('hospitalMap').setView([37.7749, -122.4194], 13);
      let marker;
  
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: '© OpenStreetMap contributors'
      }).addTo(map);
  
      // Get the form fields
      const latField = document.getElementById('latitude');
      const lngField = document.getElementById('longitude');
  
      // Function to update marker position
      function updateMarker(lat, lng) {
          if (marker) {
              map.removeLayer(marker);
          }
          marker = L.marker([lat, lng]).addTo(map);
          map.setView([lat, lng], 13);
      }
  
      // If we have existing coordinates, show them
      if (latField.value && lngField.value) {
          const lat = parseFloat(latField.value);
          const lng = parseFloat(lngField.value);
          updateMarker(lat, lng);
      }
  
      // Map click event
      map.on('click', function(e) {
          latField.value = e.latlng.lat.toFixed(6);
          lngField.value = e.latlng.lng.toFixed(6);
          updateMarker(e.latlng.lat, e.latlng.lng);
      });
  
      // Input field change events
      latField.addEventListener('change', function() {
          if (latField.value && lngField.value) {
              const lat = parseFloat(latField.value);
              const lng = parseFloat(lngField.value);
              if (!isNaN(lat) && !isNaN(lng)) {
                  updateMarker(lat, lng);
              }
          }
      });
  
      lngField.addEventListener('change', function() {
          if (latField.value && lngField.value) {
              const lat = parseFloat(latField.value);
              const lng = parseFloat(lngField.value);
              if (!isNaN(lat) && !isNaN(lng)) {
                  updateMarker(lat, lng);
              }
          }
      });
  });
  </script>



<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="/static/js/main.js"></script>


{% endblock %}
